<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Ambient Documentation</title>
        <meta name="robots" content="noindex" />
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="introduction.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">User Guide</li><li class="chapter-item expanded "><a href="user/installing.html"><strong aria-hidden="true">1.</strong> Installing</a></li><li class="chapter-item expanded "><a href="user/running.html"><strong aria-hidden="true">2.</strong> Running</a></li><li class="chapter-item expanded "><a href="user/api.html"><strong aria-hidden="true">3.</strong> API</a></li><li class="chapter-item expanded "><a href="user/debugging.html"><strong aria-hidden="true">4.</strong> Debugging</a></li><li class="chapter-item expanded affix "><li class="part-title">Reference Guide</li><li class="chapter-item expanded "><a href="reference/runtime.html"><strong aria-hidden="true">5.</strong> Runtime</a></li><li class="chapter-item expanded "><a href="reference/project.html"><strong aria-hidden="true">6.</strong> Project</a></li><li class="chapter-item expanded "><a href="reference/asset_pipeline.html"><strong aria-hidden="true">7.</strong> Asset pipeline</a></li><li class="chapter-item expanded "><a href="reference/terminology.html"><strong aria-hidden="true">8.</strong> Terminology</a></li><li class="chapter-item expanded affix "><li class="part-title">Community</li><li class="chapter-item expanded "><a href="community/contributing.html"><strong aria-hidden="true">9.</strong> Contributing</a></li><li class="chapter-item expanded "><a href="community/changelog.html"><strong aria-hidden="true">10.</strong> Changelog</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Ambient Documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p>Ambient is a WebAssembly runtime for building high-performance online games and 3D applications.</p>
<h2 id="features"><a class="header" href="#features">Features</a></h2>
<ul>
<li><strong>Seamless networking</strong>: Ambient is both your server and client. All you need to do is to build your server and/or client-side logic: the runtime handles synchronization of data for you.</li>
<li><strong>Isolation</strong>: Projects you build for Ambient are executed in isolation through the power of <a href="https://webassembly.org/">WebAssembly</a> - so that if something crashes, it wonâ€™t take down your entire program. It also means that you can run untrusted code safely.</li>
<li><strong>Data-oriented design</strong>: The core data model of Ambient is an <a href="https://en.wikipedia.org/wiki/Entity_component_system">entity component system</a> which each WASM module can manipulate.</li>
<li><strong>Language-agnostic</strong>: You will be able to build Ambient modules in any language that can compile to WebAssembly. At present, Rust is the only supported language, but we are working on expanding to other languages.</li>
<li><strong>Single executable</strong>: Ambient is a single executable which can run on Windows, Mac and Linux. It can act as a server or as a client.</li>
<li><strong>Interoperability</strong>: Ambient allows you to define custom components and &quot;concepts&quot; (collections of components). As long as your Ambient projects use the same components and concepts, they will be able to share data and interoperate, even if they have no awareness of each other.</li>
<li><strong>Asset pipeline and streaming</strong>: Ambient has an <a href="https://ambientrun.github.io/Ambient/asset_pipeline.html">asset pipeline</a> that is capable of compiling multiple asset formats, including <code>.glb</code> and <code>.fbx</code>. The assets are always streamed over the network, so your clients will receive everything they need when they join.</li>
<li><strong>Powerful renderer</strong>: The Ambient renderer is GPU-driven, with both culling and level-of-detail switching being handled entirely by the GPU. By default, it uses <a href="https://en.wikipedia.org/wiki/Physically_based_rendering">PBR</a>. It also supports cascading shadow maps and instances everything that can be instanced.</li>
</ul>
<p>See the <a href="https://ambientrun.github.io/Ambient/">documentation</a> for a getting started guide, or browse the <a href="https://github.com/AmbientRun/Ambient/tree/main/guest/rust/examples">examples</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="installing"><a class="header" href="#installing">Installing</a></h1>
<p>The easiest way to install Ambient is to download the latest binary release from the <a href="https://github.com/AmbientRun/Ambient/releases">GitHub releases</a>.
Currently, there are builds for Windows x64, Linux x64, and Mac ARM64. For other platforms, use the <a href="user/installing.html#installing-from-git">installing from Git</a> method.</p>
<p>You will also need <a href="https://www.rust-lang.org/">Rust</a> installed with the <code>wasm32-wasi</code> toolchain so that you can compile Ambient modules.
Note that Ambient compiles Rust code with stable Rust, so you must make sure that <code>wasm32-wasi</code> is installed for <code>stable</code>:</p>
<pre><code class="language-sh">rustup target add --toolchain stable wasm32-wasi
</code></pre>
<h2 id="installing-from-git"><a class="header" href="#installing-from-git">Installing from Git</a></h2>
<p>To install the latest released version from Git, run the following:</p>
<pre><code class="language-sh">cargo install --git https://github.com/AmbientRun/Ambient.git --tag v0.1.1
</code></pre>
<p>To install the latest version on the <code>main</code> branch, run the following:</p>
<pre><code class="language-sh">cargo install --git https://github.com/AmbientRun/Ambient.git
</code></pre>
<p>Note that if you are running a project outside of the <code>guest/rust</code> workspace, it is likely that the published version of the API will be incompatible with <code>main</code>, and you will need to specify the dependency manually.</p>
<h3 id="build-dependencies-linuxubuntu"><a class="header" href="#build-dependencies-linuxubuntu">Build dependencies: Linux/Ubuntu</a></h3>
<p>For the above to work on linux, you also need to install the following build dependencies;</p>
<pre><code class="language-sh">apt-get install -y build-essential cmake pkg-config libfontconfig1-dev clang libasound2-dev ninja-build
</code></pre>
<h2 id="running-on-headless-linuxubuntu"><a class="header" href="#running-on-headless-linuxubuntu">Running on headless Linux/Ubuntu</a></h2>
<p>To run on a headless linux machine, install the following dependencies;</p>
<pre><code class="language-sh">add-apt-repository ppa:oibaf/graphics-drivers -y
apt-get update
apt install -y libxcb-xfixes0-dev mesa-vulkan-drivers
</code></pre>
<p>Ambient currently assumes that you have access to GPU drivers (but not necessarily a <em>GPU</em> by itself) in headless mode. This requirement may be relaxed in future.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="running"><a class="header" href="#running">Running</a></h1>
<h2 id="creating-a-project"><a class="header" href="#creating-a-project">Creating a project</a></h2>
<p>To create a project, run:</p>
<pre><code class="language-sh">ambient new my-project
</code></pre>
<p>This will generate a new project with a simple Rust module and an Ambient project manifest.</p>
<h2 id="running-a-project"><a class="header" href="#running-a-project">Running a project</a></h2>
<p>This project can be run:</p>
<pre><code class="language-sh">cd my-project
ambient run
</code></pre>
<p>From here on, you can open up the project in your favorite IDE and start editing the code. If you require a recommendation for an IDE, see <a href="user/./api.html#setting-up-your-ide">Setting up your IDE</a>.</p>
<p>For more details about the API, see <a href="user/./api.html">API</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="api"><a class="header" href="#api">API</a></h1>
<p>The Ambient API is what developers use to interact with Ambient. It offers full access to Ambient's ECS, gameplay behavior, and more. At the time of writing, the Ambient API is only supported on the server, but we are actively working on bringing it to the client.</p>
<p>The easiest way to get started is by looking at some of the <a href="https://github.com/AmbientRun/Ambient/tree/main/guest/rust/examples">examples</a>, which detail individual aspects of Ambient and its API. These can be combined to produce more complex functionality.</p>
<h2 id="setting-up-your-ide"><a class="header" href="#setting-up-your-ide">Setting up your IDE</a></h2>
<p>For Rust, we recommend using <a href="https://code.visualstudio.com/">Visual Studio Code</a> with <a href="https://rust-analyzer.github.io/">rust-analyzer</a>, as described <a href="https://code.visualstudio.com/docs/languages/rust">here</a>.</p>
<p>Opening the <code>guest/rust</code> folder in VS Code or another Cargo/Rust-aware IDE will give you auto-completion and other related functionality.</p>
<h2 id="reference-documentation"><a class="header" href="#reference-documentation">Reference documentation</a></h2>
<p>The full API reference for Ambient can be found on <a href="https://docs.rs/ambient_api">docs.rs</a>.</p>
<p>Note that the published API may not be up to date with the latest Git commit of the runtime - if you are using bleeding-edge features, you will need to document the API yourself using <code>cargo doc -p ambient_api</code> in the <code>guest/rust</code> folder.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="debugging"><a class="header" href="#debugging">Debugging</a></h1>
<h2 id="ecs"><a class="header" href="#ecs">ECS</a></h2>
<p>When the client is run with the <code>--debug</code> parameter, several buttons are shown at the top:</p>
<pre><code class="language-sh">ambient run --debug examples/minigolf
</code></pre>
<p><img src="user/debug_buttons.png" alt="Debug buttons at the top of the window with --debug" /></p>
<p>These can be used to inspect the state of the client and server ECSes, as well as the renderer. When one of these buttons are pressed, a YAML file will be created with the corresponding state, and its path will be written to <code>stdout</code>:</p>
<pre><code class="language-log">[2023-02-23T17:47:36Z INFO  ambient_debugger] Wrote &quot;Ambient/tmp/server_hierarchy.yml&quot;
</code></pre>
<p>Here is some sample output for the server ECS:</p>
<pre><code class="language-yaml">- &quot;id=RsE148MNkdB24bFWQrfeMA loc=48:0&quot;:
    &quot;core::app::main_scene&quot;: ()
    &quot;core::ecs::children&quot;: &quot;[EntityId(koK-dbeCZDrcHzsT7QELUw, 110383077981027712353063371358575952530)]&quot;
    &quot;core::transform::translation&quot;: &quot;Vec3(-5.0, -0.0019752309, 2.8536541)&quot;
    &quot;core::transform::scale&quot;: &quot;Vec3(1.0, 1.0, 1.0)&quot;
    &quot;core::transform::rotation&quot;: &quot;Quat(0.0, 0.0, 0.0, 1.0)&quot;
    &quot;core::transform::local_to_world&quot;: &quot;Mat4 { x_axis: Vec4(1.0, 0.0, 0.0, 0.0), y_axis: Vec4(0.0, 1.0, 0.0, 0.0), z_axis: Vec4(0.0, 0.0, 1.0, 0.0), w_axis: Vec4(-5.0, -0.001970334, 2.8387475, 1.0) }&quot;
    &quot;core::transform::spherical_billboard&quot;: ()
  children:
    - &quot;id=koK-dbeCZDrcHzsT7QELUw loc=46:0&quot;:
        &quot;core::app::main_scene&quot;: ()
        &quot;core::transform::local_to_world&quot;: &quot;Mat4 { x_axis: Vec4(0.02, 0.0, 0.0, 0.0), y_axis: Vec4(0.0, -0.02, 1.7484555e-9, 0.0), z_axis: Vec4(0.0, -1.7484555e-9, -0.02, 0.0), w_axis: Vec4(-5.0, -0.001970334, 2.8387475, 1.0) }&quot;
        &quot;core::transform::local_to_parent&quot;: &quot;Mat4 { x_axis: Vec4(0.02, 0.0, 0.0, 0.0), y_axis: Vec4(0.0, -0.02, 1.7484555e-9, 0.0), z_axis: Vec4(0.0, -1.7484555e-9, -0.02, 0.0), w_axis: Vec4(0.0, 0.0, 0.0, 1.0) }&quot;
        &quot;core::transform::mesh_to_local&quot;: &quot;Mat4 { x_axis: Vec4(1.0, 0.0, 0.0, 0.0), y_axis: Vec4(0.0, 1.0, 0.0, 0.0), z_axis: Vec4(0.0, 0.0, 1.0, 0.0), w_axis: Vec4(0.0, 0.0, 0.0, 1.0) }&quot;
        &quot;core::transform::mesh_to_world&quot;: &quot;Mat4 { x_axis: Vec4(0.02, 0.0, 0.0, 0.0), y_axis: Vec4(0.0, -0.02, 1.7484555e-9, 0.0), z_axis: Vec4(0.0, -1.7484555e-9, -0.02, 0.0), w_axis: Vec4(-5.0, -0.001970334, 2.8387475, 1.0) }&quot;
        &quot;core::rendering::color&quot;: &quot;Vec4(1.0, 0.3, 0.3, 1.0)&quot;
        &quot;core::ui::text&quot;: '&quot;user_470i61dDp7FKjGFQetZ53O&quot;'
        &quot;core::ui::font_size&quot;: &quot;36.0&quot;
        &quot;core::player::user_id&quot;: &quot;...&quot;
      children: []
</code></pre>
<h2 id="physics"><a class="header" href="#physics">Physics</a></h2>
<p>Ambient uses PhysX 4.1 from Nvidia for physics simulation. As a result, the entire physics scene can be visualized using the <a href="https://developer.nvidia.com/physx-visual-debugger">PhysX Visual Debugger (PVD)</a>.</p>
<p>By default, physics debugging is on. To debug your scene, install and start PVD, then start an Ambient project. Your project's scene should automatically be visible within PVD. For more details on how to use PVD, see the <a href="https://gameworksdocs.nvidia.com/PhysX/4.1/documentation/physxguide/Manual/VisualDebugger.html">guide</a>.</p>
<h2 id="assets"><a class="header" href="#assets">Assets</a></h2>
<p>When assets are compiled by the assets pipeline, the resulting artifacts will be output to the <code>build</code> directory in your project. These can be examined to determine whether or not your source was accurately compiled by the asset pipeline.</p>
<p>Additionally, if there are fatal errors or warnings, the asset pipeline will report them during the compilation process.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="runtime"><a class="header" href="#runtime">Runtime</a></h1>
<h2 id="coordinate-system"><a class="header" href="#coordinate-system">Coordinate system</a></h2>
<p>By default, Ambient uses a right-handed coordinate system for NDC with <code>z</code> from 1 to 0 (i.e. reverse-z with the near plane at <code>z=1</code>, and the far plane at <code>z=0</code>).</p>
<p>For world coordinates, it uses a left-handed system. We consider <code>x</code> to be right, <code>y</code> to be back, and <code>z</code> to be up (same as Unreal). This means that the default camera without any transformation is lying on its stomach and facing downwards.</p>
<pre><code>NDC:
   y
   |
   |
   0 ---&gt; x
 /
z (coming out of the screen)

World:
  z (up)
  |
  0 --- x (right)
 /
y
</code></pre>
<p>WebGPU uses positive-<code>y</code> as up in its NDC, and <code>z</code> from 0 to 1 (https://gpuweb.github.io/gpuweb/#coordinate-systems) - that is, it is left-handed.</p>
<p>Freya HolmÃ©r has produced an overview of which programs use which coordinate systems, which can be found <a href="https://twitter.com/freyaholmer/status/1325556229410861056">here</a>.</p>
<p>For more information on our use of reverse-z, consult the following links:</p>
<ul>
<li>https://developer.nvidia.com/content/depth-precision-visualized</li>
<li>https://www.danielecarbone.com/reverse-depth-buffer-in-opengl/</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="project"><a class="header" href="#project">Project</a></h1>
<p>All Ambient projects must have an <code>ambient.toml</code> project manifest that describes their functionality. This format is in flux, but is inspired by Rust's <code>Cargo.toml</code>.</p>
<p>At present, dependencies are <em>not</em> supported, but this will change in future.</p>
<h2 id="reference"><a class="header" href="#reference">Reference</a></h2>
<p>The full structure for <code>ambient.toml</code> is shown below with a sample:</p>
<!-- TODO: autogenerate with generate-docs -->
<pre><code class="language-toml">#
# The project section describes all project metadata.
#
[project]
# This must be a snake-cased name.
id = &quot;my_cool_project&quot;
# This name is human-readable and can contain anything.
name = &quot;My Cool Project&quot;
# This description is human-readable and can contain anything.
description = &quot;A sample project that's the coolest thing ever.&quot;
# Projects are expected to use (major, minor, patch) semantic versioning.
# Other formats are not accepted. This requirement may be relaxed later.
version = &quot;0.0.1&quot;

#
# Custom components defined by this project.
#
[components]
# Inline tables can be used.
cool_component = { type = &quot;I32&quot;, name = &quot;Cool Component&quot;, description = &quot;A cool component&quot;, attributes = [&quot;Debuggable&quot;] }
# Explicit tables can also be used.
[components.cool_component2]
# At time of writing, supported component types are:
#   Empty, Bool, EntityId, F32, F64, Mat4, I32, Quat, String, U32, U64, Vec2, Vec3, Vec4, Vec4
# or
#   { type = &quot;Vec&quot;, element_type = &quot;TypeFromAbove&quot; }
#   { type = &quot;Option&quot;, element_type = &quot;TypeFromAbove&quot; }
# You cannot nest container types.
type = &quot;I32&quot;
name = &quot;Cool Component 2&quot;
description = &quot;A cool component 2&quot;
# At time of writing, supported attributes are:
#   Debuggable, Networked, Resource, Store
attributes = [&quot;Debuggable&quot;]
# Namespaces are also supported:
&quot;cool::component&quot; = { type = &quot;I32&quot;, name = &quot;Cool Component&quot;, description = &quot;A cool component&quot;, attributes = [&quot;Debuggable&quot;] }

#
# Custom concepts defined by this project.
#
[concepts.concept1]
# The name of the concept.
name = &quot;Concept 1&quot;
# The description of the concept.
description = &quot;The best&quot;
[concepts.transformable.components]
# Each component needs to be specified with a default value.
# At time of writing, you can only use components defined in this project manifest.
cool_component = 0

# A concept that extends `concept1` and has both `cool_component` and `cool_component2`.
[concepts.concept2]
name = &quot;Concept 2&quot;
description = &quot;The successor&quot;
# At time of writing, all concepts being extended must be defined in this project manifest.
extends = [&quot;concept1&quot;]
[concepts.concept2.components]
cool_component2 = 1
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="asset-pipeline"><a class="header" href="#asset-pipeline">Asset pipeline</a></h1>
<!-- markdownlint-disable-file MD024 -->
<p>Ambient features an automated asset pipeline that is capable of loading and processing a number of assets and formats.</p>
<p>To use it, create a file named <code>pipeline.json</code> anywhere in your project. You can also prepend anything you'd like to the filename, which means <code>hello_pipeline.json</code> and such will also work. The full reference structure of the <code>json</code> is described in <a href="reference/asset_pipeline.html#reference">Reference</a>.</p>
<p>This pipeline will look at, but not necessarily process, all of the files adjacent to it in the folder. By convention, our examples place their assets in the <code>assets</code> folder, but this is not necessary.</p>
<p>A <code>pipeline.json</code> can contain one or more pipelines. To use more than one pipeline, wrap your pipeline object in a JSON array (<code>[]</code>).</p>
<h2 id="models"><a class="header" href="#models">Models</a></h2>
<p>The <code>Models</code> pipeline can be used to compile a model, or models, to meshes that can be used by Ambient. Additionally, by default, prefabs are created for each mesh. These prefabs can have components added to them automatically through the <code>object_components</code> field of the pipeline.</p>
<h3 id="supported-formats"><a class="header" href="#supported-formats">Supported formats</a></h3>
<ul>
<li>FBX: Native support</li>
<li>glTF: Native support</li>
<li>Unity models: Native support</li>
<li>Quixel models: Native support</li>
<li>~30 other formats: This support is provided through the <a href="https://github.com/assimp/assimp">assimp</a> library. It is not guaranteed to be fully integrated.</li>
</ul>
<h3 id="examples"><a class="header" href="#examples">Examples</a></h3>
<h4 id="basic-models"><a class="header" href="#basic-models">Basic models</a></h4>
<p>The following will load <code>.glb</code> and <code>.fbx</code> files in the folder or any of the sub-folders.</p>
<pre><code class="language-json">{
  &quot;pipeline&quot;: {
    &quot;type&quot;: &quot;Models&quot;
  }
}
</code></pre>
<h4 id="a-more-complex-model-example"><a class="header" href="#a-more-complex-model-example">A more complex model example</a></h4>
<p>The following will filter to just files that contain <code>table</code>, scale it down, and override materials for the <code>wood</code> material.</p>
<pre><code class="language-json">{
  &quot;pipeline&quot;: {
    &quot;type&quot;: &quot;Models&quot;,
    &quot;collider&quot;: {
      &quot;type&quot;: &quot;FromModel&quot;
    },
    &quot;material_overrides&quot;: [
      {
        &quot;filter&quot;: {
          &quot;type&quot;: &quot;ByName&quot;,
          &quot;name&quot;: &quot;wood&quot;
        },
        &quot;material&quot;: {
          &quot;base_color&quot;: &quot;wood_albedo.png&quot;,
          &quot;metalic&quot;: 0.5,
          &quot;roughness&quot;: 0.2
        }
      }
    ],
    &quot;transforms&quot;: [
      {
        &quot;type&quot;: &quot;Scale&quot;,
        &quot;scale&quot;: 0.1
      }
    ]
  },
  &quot;sources&quot;: [&quot;**/*table*&quot;],
  &quot;tags&quot;: [&quot;Man made&quot;]
}
</code></pre>
<h3 id="notes"><a class="header" href="#notes">Notes</a></h3>
<ul>
<li>If you are using components in your prefab and are hot-reloading it, the incoming prefab will overwrite any corresponding components on the current state of the entity. These components should only be used for static data - that is, <code>max_hitpoints</code> but not <code>current_hitpoints</code>.</li>
</ul>
<h2 id="materials"><a class="header" href="#materials">Materials</a></h2>
<p>Detailed documentation is pending, but please consult the <a href="reference/asset_pipeline.html#reference">Reference</a>.</p>
<h3 id="supported-formats-1"><a class="header" href="#supported-formats-1">Supported formats</a></h3>
<ul>
<li><code>jpg</code></li>
<li><code>png</code></li>
<li><code>gif</code></li>
<li><code>webp</code></li>
<li>as well as other common image formats</li>
</ul>
<h2 id="audio"><a class="header" href="#audio">Audio</a></h2>
<p>Detailed documentation is pending, but please consult the <a href="reference/asset_pipeline.html#reference">Reference</a>.</p>
<h3 id="supported-formats-2"><a class="header" href="#supported-formats-2">Supported formats</a></h3>
<ul>
<li><code>ogg</code></li>
<li><code>wav</code></li>
<li><code>mp3</code></li>
</ul>
<h2 id="reference-1"><a class="header" href="#reference-1">Reference</a></h2>
<p>The full structure for <code>pipeline.json</code> is described below in TypeScript <code>.d.ts</code> format:</p>
<pre><code class="language-typescript">// This file is generated by the `generate-docs` tool. Please do not manually edit it.
// pipeline.json
export type u32 = number;
export type f32 = number;
export type Vec2 = [number, number];
export type Vec3 = [number, number, number];
export type Vec4 = [number, number, number, number];
export type EntityData = {[component_id: string]: any};
export type AssetUrl = string;

export type Pipeline = {
  /// The type of pipeline to use.
  pipeline: {
    /// The models asset pipeline.
    /// Will import models (including constituent materials and animations) and generate prefabs for them by default.
    type: &quot;Models&quot;,
    /// The importer to use to process models.
    importer?: {
      /// The default importer is sufficient for the majority of needs.
      type: &quot;Regular&quot;,
    } | {
      /// Import Unity models.
      type: &quot;UnityModels&quot;,
      /// Whether or not the Unity prefabs should be converted to Ambient prefabs.
      use_prefabs: boolean,
    } | {
      /// Import Quixel models.
      type: &quot;Quixel&quot;,
    },
    /// Use assimp as the importer.
    /// This will support more file formats, but is less well-integrated. Off by default.
    force_assimp?: boolean,
    /// The physics collider to use for this mesh.
    collider?: {
      /// No physics collider. The default.
      type: &quot;None&quot;,
    } | {
      /// Extract the physics collider from the model.
      type: &quot;FromModel&quot;,
      /// Whether or not the normals should be flipped.
      flip_normals?: boolean,
      /// Whether or not the indices should be reversed for each triangle. On by default.
      reverse_indices?: boolean,
    } | {
      /// Use a spherical character collider.
      type: &quot;Character&quot;,
      /// The radius of the collider.
      radius?: f32,
      /// The height of the collider.
      height?: f32,
    },
    /// If a collider is present, this controls how it will interact with other colliders.
    collider_type?: 
      /// This object cannot move (e.g. a wall).
      &quot;Static&quot; | 
      /// This object can move dynamically in the scene (e.g. a physics object).
      &quot;Dynamic&quot; | 
      /// This object should only be present in the trigger-area scene.
      &quot;TriggerArea&quot; | 
      /// This object should only be present in the picking scene.
      &quot;Picking&quot;,
    /// Whether or not this mesh should have its texture sizes capped.
    cap_texture_sizes?: 
      /// Cap this model's textures to 128x128.
      &quot;X128&quot; | 
      /// Cap this model's textures to 256x256.
      &quot;X256&quot; | 
      /// Cap this model's textures to 512x512.
      &quot;X512&quot; | 
      /// Cap this model's textures to 1024x1024.
      &quot;X1024&quot; | 
      /// Cap this model's textures to 2048x2048.
      &quot;X2048&quot; | 
      /// Cap this model's textures to 4096x4096.
      &quot;X4096&quot; | 
      /// Cap this model's textures to SIZE x SIZE.
      /// It is strongly recommended that this is a power of two.
      {&quot;Custom&quot;: u32},
    /// Treats all assets in the pipeline as variations, and outputs a single asset which is a collection of all assets.
    /// Most useful for grass and other entities whose individual identity is not important.
    collection_of_variants?: boolean,
    /// Output prefabs that can be spawned. On by default.
    output_prefabs?: boolean,
    /// Output the animations that belonged to this model.
    output_animations?: boolean,
    /// If specified, these components will be added to the prefabs produced by `output_prefabs`.
    /// 
    /// This is a great way to specify additional information about your prefab that can be used by gameplay logic.
    /// Note that these components should have static data (i.e. statistics), not dynamic state, as any such state could be
    /// replaced by this prefab being reloaded.
    prefab_components?: EntityData,
    /// If specified, a list of overrides to use for the materials for the mesh.
    material_overrides?: {
      /// The filter for this override (i.e. what it should apply to).
      filter: {
        /// Replace all materials.
        type: &quot;All&quot;,
      } | {
        /// Replace all materials that match this name exactly.
        type: &quot;ByName&quot;,
        /// The material name to replace. Must match exactly (i.e. is case-sensitive and does not ignore whitespace).
        name: string,
      },
      /// The material to use as the replacement.
      material: {
        /// The name of the material.
        name?: string,
        /// Where the material came from.
        source?: string,
        /// The base color map (i.e. texture) of this material.
        base_color?: AssetUrl,
        /// The opacity map of this material.
        opacity?: AssetUrl,
        /// The normal map of this material.
        normalmap?: AssetUrl,
        /// The metallic roughness map of this material.
        metallic_roughness?: AssetUrl,
        /// The color that this material should be multiplied by. Defaults to white for PBR.
        base_color_factor?: Vec4,
        /// The emissive factor of this material (i.e. the color that it emits). Defaults to black for PBR.
        emissive_factor?: Vec4,
        /// Whether or not this material is transparent. Defaults to false for PBR.
        transparent?: boolean,
        /// The opacity level (between 0 and 1) at which this material will not be rendered.
        /// If the opacity map at a point has an opacity lower than this, that point will not be rendered.
        /// Defaults to 0.5 for PBR.
        alpha_cutoff?: f32,
        /// Whether or not this material is double-sided. Defaults to false for PBR.
        double_sided?: boolean,
        /// The metallic coefficient of this material. Defaults to 1 for PBR.
        metallic?: f32,
        /// The roughness coefficient of this material. Defaults to 1 for PBR.
        roughness?: f32,
        /// The non-PBR specular map of this material. If specified, it will be translated to a PBR equivalent.
        specular?: AssetUrl,
        /// The non-PBR specular exponent of this material. If specified alongside `specular`, it will be translated to a PBR equivalent.
        specular_exponent?: f32,
      },
    }[],
    /// If specified, a list of transformations to apply to this model. This can be used
    /// to correct coordinate space differences between your asset source and the runtime.
    /// 
    /// These will be applied in sequence.
    transforms?: ({
      /// Rotate Y up to Z up.
      type: &quot;RotateYUpToZUp&quot;,
    } | {
      /// Rotate X by `deg` degrees.
      type: &quot;RotateX&quot;,
      /// The degrees to rotate this model around the X axis.
      deg: f32,
    } | {
      /// Rotate Y by `deg` degrees.
      type: &quot;RotateY&quot;,
      /// The degrees to rotate this model around the Y axis.
      deg: f32,
    } | {
      /// Rotate Z by `deg` degrees.
      type: &quot;RotateZ&quot;,
      /// The degrees to rotate this model around the Z axis.
      deg: f32,
    } | {
      /// Scale this model.
      type: &quot;Scale&quot;,
      /// The factor to scale this model by.
      scale: f32,
    } | {
      /// Translate this model.
      type: &quot;Translate&quot;,
      /// The translation to apply to this model (i.e. this model will be moved by `translation` in the current coordinate space).
      translation: Vec3,
    } | {
      /// Scale this model's AABB.
      type: &quot;ScaleAABB&quot;,
      /// The factor to scale this model's AABB by.
      scale: f32,
    } | {
      /// Scale this model's animations (spatially, not in time).
      type: &quot;ScaleAnimations&quot;,
      /// The factor to scale this model's animations by.
      scale: f32,
    } | {
      /// Re-root this mesh.
      type: &quot;SetRoot&quot;,
      /// The name of the node to set as the new root for this mesh.
      name: string,
    } | {
      /// Re-center this mesh such that the root is located at the origin.
      type: &quot;Center&quot;,
    })[],
  } | {
    /// The materials asset pipeline.
    /// Will import specific materials without needing to be part of a model.
    type: &quot;Materials&quot;,
    /// The importer to use for materials.
    importer: {
      /// Import a single material, as specified.
      /// All of its dependent assets (URLs, etc) will be resolved during the build process.
      type: &quot;Single&quot;,
      /// The name of the material.
      name?: string,
      /// Where the material came from.
      source?: string,
      /// The base color map (i.e. texture) of this material.
      base_color?: AssetUrl,
      /// The opacity map of this material.
      opacity?: AssetUrl,
      /// The normal map of this material.
      normalmap?: AssetUrl,
      /// The metallic roughness map of this material.
      metallic_roughness?: AssetUrl,
      /// The color that this material should be multiplied by. Defaults to white for PBR.
      base_color_factor?: Vec4,
      /// The emissive factor of this material (i.e. the color that it emits). Defaults to black for PBR.
      emissive_factor?: Vec4,
      /// Whether or not this material is transparent. Defaults to false for PBR.
      transparent?: boolean,
      /// The opacity level (between 0 and 1) at which this material will not be rendered.
      /// If the opacity map at a point has an opacity lower than this, that point will not be rendered.
      /// Defaults to 0.5 for PBR.
      alpha_cutoff?: f32,
      /// Whether or not this material is double-sided. Defaults to false for PBR.
      double_sided?: boolean,
      /// The metallic coefficient of this material. Defaults to 1 for PBR.
      metallic?: f32,
      /// The roughness coefficient of this material. Defaults to 1 for PBR.
      roughness?: f32,
      /// The non-PBR specular map of this material. If specified, it will be translated to a PBR equivalent.
      specular?: AssetUrl,
      /// The non-PBR specular exponent of this material. If specified alongside `specular`, it will be translated to a PBR equivalent.
      specular_exponent?: f32,
    } | {
      /// Import Quixel materials.
      type: &quot;Quixel&quot;,
    },
    /// Whether or not decal prefabs should be created for each of these materials.
    output_decals?: boolean,
  } | {
    /// The audio asset pipeline.
    /// Will import supported audio file formats and produce Ogg Vorbis files to be used by the runtime.
    type: &quot;Audio&quot;,
  },
  /// Filter the sources used to feed this pipeline.
  /// This is a list of glob patterns for accepted files.
  /// All files are accepted if this is empty.
  sources?: string[],
  /// Tags to apply to the output resources.
  tags?: string[],
  /// Categories to apply to the output resources.
  categories?: string[][],
}
</code></pre>
<p>In addition, a single <code>pipeline.json</code> can contain more than one pipeline. To do this, wrap your existing object in <code>[]</code> (i.e. a JSON array) and add more pipelines as required.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="terminology"><a class="header" href="#terminology">Terminology</a></h1>
<p>A brief list of terms used by Ambient and their definitions. This is incomplete - let us know if there's anything you need clarified!</p>
<ul>
<li><strong>Concept</strong>: A collection of components defined in an <code>ambient.toml</code> that, when present together, imply something about the entity they're attached to. Similar to Go's interfaces.</li>
<li><strong>ECS</strong>: <a href="https://en.wikipedia.org/wiki/Entity_component_system">https://en.wikipedia.org/wiki/Entity_component_system</a></li>
<li><strong><code>ElementComponent</code></strong>: A piece of UI that can be rendered. Similar to React's Components.</li>
<li><strong>Prefab</strong>: A entity or group of entities. Often an entity with a model and a collider attached to it.</li>
<li><strong>PVD</strong>: <a href="https://developer.nvidia.com/physx-visual-debugger">PhysX Visual Debugger</a>.</li>
<li><strong>WASM/WebAssembly</strong>: <a href="https://webassembly.org/">https://webassembly.org/</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contributing"><a class="header" href="#contributing">Contributing</a></h1>
<h2 id="api-docs"><a class="header" href="#api-docs">API docs</a></h2>
<p>To see the latest version of the API docs, run the following command in the <code>Ambient</code> repository:</p>
<pre><code class="language-sh">cd guest/rust
cargo doc -p ambient_api --open --no-deps
</code></pre>
<h2 id="releasing"><a class="header" href="#releasing">Releasing</a></h2>
<ol>
<li>Run <code>cargo run --example main -p generate-docs</code> and <code>cargo run -- update-interface-components</code> to update the documentation from the codebase.</li>
<li>Update workspace versions in:
<ul>
<li><code>Cargo.toml</code></li>
<li><code>docs/src/installing.md</code></li>
<li><code>guest/rust/Cargo.toml</code></li>
<li><code>guest/rust/api/Cargo.toml</code> (<code>ambient_api_macro</code> version).</li>
</ul>
</li>
<li>Run <code>cargo build</code> in the root directory, and in <code>guest/rust</code>, so that <code>Cargo.lock</code> is created. The build process will update several files in the <code>guest</code> folder.</li>
<li>If on a UNIX system, run <code>./scripts/run_all_examples.sh</code> and visually verify that they work as expected.</li>
<li>Update the <code>CHANGELOG.md</code> at the root of the repository. Copy the unreleased block, set the version and date on the copy, and then empty out the unreleased block for the next release.</li>
<li>Ensure that <code>README.md</code> and <code>docs/src/introduction.md</code> match.</li>
<li>Make a commit with the above changes, and create a tag <code>v0.X.Y</code>.</li>
<li>Push to origin.</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><!-- markdownlint-disable-file MD041 -->
<h1 id="changelog"><a class="header" href="#changelog">Changelog</a></h1>
<!-- markdownlint-disable-file MD024 -->
<p>This changelog is manually updated. While an effort will be made to keep the <a href="community/changelog.html#unreleased-yyyy-mm-dd">Unreleased</a> changes up to date, it may not be fully representative of the current state of the project.</p>
<!-- If you are updating this file, make sure you copy the unreleased section and change the version and date. Do not remove it. -->
<h2 id="unreleased-yyyy-mm-dd"><a class="header" href="#unreleased-yyyy-mm-dd">Unreleased (YYYY-MM-DD)</a></h2>
<h3 id="added"><a class="header" href="#added">Added</a></h3>
<ul>
<li>Support for kinematic bodies. This is used by the minigolf example to provide its moving obstacles.</li>
<li>Added <code>physics::move_character</code> function to correctly move character controllers. This is used by the third-person camera example.</li>
</ul>
<!-- ### Changed -->
<h3 id="fixed"><a class="header" href="#fixed">Fixed</a></h3>
<ul>
<li>Added attributions for external code.</li>
</ul>
<!-- ### Removed -->
<h2 id="version-011-2023-02-22"><a class="header" href="#version-011-2023-02-22">Version 0.1.1 (2023-02-22)</a></h2>
<h3 id="added-1"><a class="header" href="#added-1">Added</a></h3>
<ul>
<li>A <a href="community/guest/rust/examples/minigolf">minigolf example</a> by <a href="https://github.com/SK83RJOSH">SK83RJOSH</a>.</li>
<li>Examples are now bundled into a downloadable <code>examples.zip</code> for each release.</li>
</ul>
<h3 id="fixed-1"><a class="header" href="#fixed-1">Fixed</a></h3>
<ul>
<li>macOS ARM64 builds are now available after enabling the execution of unsigned executable memory (as required for wasmtime execution).</li>
<li>The debugging configuration for VSCode was updated to use the new CLI.</li>
<li>Minor documentation updates.</li>
</ul>
<h2 id="version-010-2023-02-22"><a class="header" href="#version-010-2023-02-22">Version 0.1.0 (2023-02-22)</a></h2>
<p>Initial release. See the <a href="https://www.ambient.run/post/introducing-ambient">announcement blog post</a>.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
    </body>
</html>
